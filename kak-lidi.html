<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kak LIDI - Chatbot SI-LIDI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Nunito', sans-serif;
    }
    
    .chat-container {
      scrollbar-width: thin;
      scrollbar-color: #60a5fa #e0f2fe;
    }
    
    .chat-container::-webkit-scrollbar {
      width: 6px;
    }
    
    .chat-container::-webkit-scrollbar-track {
      background: #e0f2fe;
      border-radius: 10px;
    }
    
    .chat-container::-webkit-scrollbar-thumb {
      background: #60a5fa;
      border-radius: 10px;
    }
    
    .message-bubble {
      animation: slideUp 0.3s ease-out;
    }
    
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes bounce {
      0%, 60%, 100% { transform: translateY(0); }
      30% { transform: translateY(-4px); }
    }
    
    .typing-dot {
      animation: bounce 1.4s infinite;
    }
    
    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }
    
    @keyframes pulse-ring {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(1.3); opacity: 0; }
    }
    
    .robot-pulse::before {
      content: '';
      position: absolute;
      inset: -4px;
      border-radius: 50%;
      background: linear-gradient(135deg, #3b82f6, #8b5cf6);
      animation: pulse-ring 2s infinite;
      z-index: -1;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 50%, #fae8ff 100%);
    }
    
    .header-gradient {
      background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    }
    
    .send-btn {
      background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
      transition: all 0.3s ease;
    }
    
    .send-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
    }
    
    .send-btn:disabled {
      opacity: 0.5;
      transform: none;
      box-shadow: none;
    }
    
    .quick-btn {
      background: linear-gradient(135deg, #f0f9ff 0%, #faf5ff 100%);
      border: 1px solid #c7d2fe;
      transition: all 0.2s ease;
    }
    
    .quick-btn:hover {
      background: linear-gradient(135deg, #dbeafe 0%, #ede9fe 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full gradient-bg">
  <div id="app" class="h-full w-full flex flex-col max-w-2xl mx-auto shadow-2xl bg-white overflow-hidden"><!-- Header -->
   <header class="header-gradient text-white p-4 flex items-center gap-3 shadow-lg flex-shrink-0">
    <div class="relative robot-pulse">
     <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-lg"><span class="text-3xl">ğŸ¤–</span>
     </div>
     <div class="absolute -bottom-1 -right-1 w-5 h-5 bg-green-400 rounded-full border-2 border-white"></div>
    </div>
    <div class="flex-1">
     <h1 id="bot-name" class="text-xl font-bold tracking-wide">Kak LIDI ğŸ¤–</h1>
     <p id="school-subtitle" class="text-blue-100 text-sm font-medium">SI-LIDI â€¢ UPT SMPN 4 Mappedeceng</p>
    </div><button id="clear-btn" class="p-2 hover:bg-white/20 rounded-full transition-colors" title="Hapus Percakapan">
     <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
     </svg></button>
   </header><!-- Chat Messages -->
   <div id="chat-container" class="flex-1 overflow-y-auto p-4 space-y-4 chat-container"><!-- Welcome Message -->
    <div id="welcome-section" class="text-center py-6">
     <div class="inline-block p-4 bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl shadow-sm border border-blue-100 mb-4"><span class="text-6xl block mb-2">ğŸ¤–</span>
      <h2 id="welcome-title" class="text-xl font-bold text-gray-800 mb-2">Hai Sobat!</h2>
      <p class="text-gray-600 text-sm leading-relaxed max-w-sm">Aku <strong>Kak LIDI</strong>, sahabat cerdasmu dari SI-LIDI!<br><span class="text-purple-600">Layanan Interaktif Digital &amp; Inspiratif</span></p>
     </div>
     <p class="text-gray-500 text-sm max-w-md mx-auto leading-relaxed">Mau tanya pelajaran susah? Butuh tips belajar? Atau mau curhat soal sekolah? Yuk ngobrol! Aku siap bantu kamu jadi <strong class="text-blue-600">Pelajar Pancasila yang Juara!</strong> ğŸš€ğŸ“š</p>
    </div><!-- Messages will be inserted here -->
    <div id="messages-container"></div><!-- Typing Indicator -->
    <div id="typing-indicator" class="hidden flex items-end gap-2">
     <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm shadow">
      ğŸ¤–
     </div>
     <div class="bg-gray-100 rounded-2xl rounded-bl-md px-4 py-3">
      <div class="flex gap-1">
       <div class="typing-dot w-2 h-2 bg-gray-400 rounded-full"></div>
       <div class="typing-dot w-2 h-2 bg-gray-400 rounded-full"></div>
       <div class="typing-dot w-2 h-2 bg-gray-400 rounded-full"></div>
      </div>
     </div>
    </div>
   </div><!-- Quick Actions -->
   <div id="quick-actions" class="px-4 py-3 border-t border-gray-100 bg-gray-50/50 flex-shrink-0">
    <p class="text-xs text-gray-500 mb-2 font-medium">ğŸ’¡ Coba tanyakan:</p>
    <div class="flex flex-wrap gap-2"><button class="quick-btn px-3 py-1.5 rounded-full text-sm text-gray-700 font-medium" data-question="Bantu aku paham rumus Pythagoras"> ğŸ“ Rumus Pythagoras </button> <button class="quick-btn px-3 py-1.5 rounded-full text-sm text-gray-700 font-medium" data-question="Kasih tips belajar biar fokus dong"> ğŸ¯ Tips Fokus Belajar </button> <button class="quick-btn px-3 py-1.5 rounded-full text-sm text-gray-700 font-medium" data-question="Apa itu Profil Pelajar Pancasila?"> ğŸ‡®ğŸ‡© Pelajar Pancasila </button> <button class="quick-btn px-3 py-1.5 rounded-full text-sm text-gray-700 font-medium" data-question="Aku lagi stres mau ujian, kasih motivasi dong"> ğŸ’ª Motivasi Ujian </button>
    </div>
   </div><!-- Input Area -->
   <div class="p-4 border-t border-gray-200 bg-white flex-shrink-0">
    <form id="chat-form" class="flex gap-3">
     <div class="flex-1 relative"><input type="text" id="message-input" placeholder="Ketik pesanmu di sini, Sobat..." class="w-full px-4 py-3 bg-gray-100 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all text-gray-700 pr-12" autocomplete="off"> <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">ğŸ’¬</span>
     </div><button type="submit" id="send-btn" class="send-btn w-12 h-12 rounded-full flex items-center justify-center text-white shadow-lg">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
      </svg></button>
    </form>
    <p class="text-center text-xs text-gray-400 mt-2">Inovasi SI-LIDI â€¢ UPT SMPN 4 Mappedeceng ğŸ“š</p>
   </div>
  </div>
  <script>
    // Default configuration
    const defaultConfig = {
      school_name: 'UPT SMPN 4 Mappedeceng',
      welcome_title: 'Hai Sobat!',
      bot_name: 'Kak LIDI ğŸ¤–',
      primary_color: '#3b82f6',
      secondary_color: '#8b5cf6',
      background_color: '#dbeafe',
      text_color: '#1f2937',
      accent_color: '#10b981'
    };

    let config = { ...defaultConfig };
    let chatHistory = [];
    let isProcessing = false;

    // Kak LIDI Response Logic
    const kakLIDIResponses = {
      greetings: [
        "Hai juga, Sobat LIDI! ğŸ˜Š Ada yang bisa Kakak bantu hari ini? Mau bahas pelajaran, tips belajar, atau curhat aja?",
        "Halo Sobat! âœ¨ Senangnya kamu mampir. Yuk, cerita apa yang ada di pikiranmu!",
        "Hey Sobat LIDI! ğŸš€ Kakak siap jadi teman diskusimu. Mau mulai dari mana nih?"
      ],
      
      pythagoras: `Wah, keren banget mau belajar Pythagoras! ğŸ“âœ¨

Jadi gini Sobat, Teorema Pythagoras itu rumus sakti untuk segitiga siku-siku:

**aÂ² + bÂ² = cÂ²**

Dimana:
â€¢ a dan b = sisi yang membentuk sudut siku-siku
â€¢ c = sisi miring (hipotenusa) - yang paling panjang!

**Contoh Kasus:**
Kalau sisi a = 3 cm dan sisi b = 4 cm
Maka cÂ² = 3Â² + 4Â² = 9 + 16 = 25
Jadi c = âˆš25 = ... berapa hayoo? ğŸ¤”

Coba hitung sendiri ya! Nanti Kakak cek jawabanmu. 

ğŸ’¡ **Tips:** Ingat angka ajaib 3-4-5, itu tripel Pythagoras yang sering muncul di soal!

ğŸ“š Buat latihan lebih lanjut, cek Rak Buku Digital SI-LIDI ya!`,

      tipsStudy: `Oke Sobat, ini dia tips fokus belajar dari Kakak! ğŸ¯

**1. Teknik Pomodoro ğŸ…**
- Belajar 25 menit fokus
- Istirahat 5 menit
- Ulangi 4x, lalu istirahat panjang 15-30 menit

**2. Siapkan Zona Belajar ğŸ“š**
- Meja rapi, pencahayaan cukup
- Jauhkan HP (minta tolong ortu simpan kalau perlu!)
- Sediakan air minum

**3. Mind Mapping ğŸ§ **
- Tulis topik utama di tengah
- Cabangkan sub-topik dengan warna berbeda
- Bikin gambar/simbol biar gampang diingat

**4. Reward System ğŸ**
- Kasih hadiah kecil ke diri sendiri setelah target tercapai
- Misal: Selesai 1 bab = boleh nonton 1 episode

**5. Belajar Bareng Teman ğŸ‘¥**
- Gotong royong! Ajarin teman yang belum paham
- Kamu juga makin paham kalau mengajarkan!

Mana yang mau kamu coba duluan, Sobat? ğŸ’ª`,

      pelajarPancasila: `Pertanyaan bagus, Sobat! ğŸ‡®ğŸ‡©âœ¨

**Profil Pelajar Pancasila** adalah ciri-ciri pelajar Indonesia yang kita semua harus punya:

**1. Beriman & Bertakwa ğŸ¤²**
Percaya pada Tuhan, toleran sama teman yang beda agama

**2. Berkebinekaan Global ğŸŒ**
Bangga jadi Indonesia, tapi juga menghargai budaya lain

**3. Bergotong Royong ğŸ¤**
Kerja sama, tolong-menolong, peduli sesama

**4. Mandiri ğŸ’ª**
Bisa atur waktu sendiri, gak manja, bertanggung jawab

**5. Bernalar Kritis ğŸ§ **
Gak gampang percaya hoax, selalu mikir logis

**6. Kreatif ğŸ¨**
Berani coba hal baru, punya ide-ide segar

Nah Sobat, dari 6 karakter ini, mana yang udah kamu punya dan mana yang masih mau dikembangin? 

Yuk sama-sama jadi Pelajar Pancasila yang Juara! ğŸš€`,

      motivasiUjian: `Hei Sobat LIDI, Kakak paham banget perasaanmu! ğŸ¤—ğŸ’ª

Stres sebelum ujian itu wajar kok. Itu tandanya kamu peduli sama hasilnya. Tapi ingat ya:

**ğŸŒŸ Kamu Lebih Kuat dari yang Kamu Kira! ğŸŒŸ**

Tips dari Kakak:
1. **Tarik napas dalam** ğŸ§˜ - Hitung 4 detik tarik, 4 detik tahan, 4 detik buang
2. **Ingat persiapanmu** - Kamu udah belajar, percaya sama dirimu!
3. **Tidur cukup** ğŸ˜´ - Otak butuh istirahat untuk bekerja maksimal
4. **Positive self-talk** - Bilang ke diri sendiri: "Aku bisa! Aku sudah berusaha!"

**Quote buat kamu:**
_"Sukses adalah hasil dari persiapan, kerja keras, dan belajar dari kegagalan."_

Apapun hasilnya nanti, kamu sudah hebat karena berani mencoba! Kakak bangga sama kamu, Sobat! ğŸ†

Ada yang mau kamu ceritain lebih lanjut? Kakak dengerin kok ğŸ˜Š`,

      homework: `Eits, Kakak gak bisa ngerjain PR-mu langsung ya, Sobat! ğŸ“ğŸ˜…

Tapi tenang, Kakak bisa bantu kamu PAHAM konsepnya! 

Kalau kamu kasih "ikan", kamu cuma kenyang sehari.
Tapi kalau Kakak kasih "kail" (cara belajarnya), kamu bisa "mancing" (ngerjain soal) sendiri selamanya! ğŸ£

Coba ceritain:
1. PR pelajaran apa?
2. Bagian mana yang bikin bingung?
3. Udah coba cara apa?

Nanti Kakak jelasin langkah-langkahnya, dan kamu yang hitung/kerjain hasil akhirnya. Deal? ğŸ¤`,

      cheating: `Hmm, Kakak paham kadang ada godaan buat nyontek... ğŸ˜”

Tapi Sobat, tau gak kenapa nyontek itu rugi banget?

**Fakta Pahit Nyontek:**
1. ğŸ“‰ Ilmunya gak nempel di otak
2. ğŸ˜° Deg-degan takut ketahuan
3. ğŸš« Kalau ketahuan, nilainya bisa 0 + malu
4. ğŸ’” Merusak kepercayaan guru dan ortu

**Yang Lebih Keren:**
- Nilai pas-pasan tapi JUJUR itu lebih bermartabat!
- Salah di ulangan = tau mana yang perlu dipelajari lagi
- Integritas adalah harta yang gak bisa dibeli

Ingat, Sobat: **"Lebih baik jadi orang biasa yang jujur, daripada juara yang curang."**

Kalau ada materi yang susah, mending tanya Kakak atau gurumu. Kita belajar bareng! ğŸ’ªğŸ§ `,

      bullying: `Sobat, ini topik serius dan Kakak senang kamu mau bahas ini... ğŸ’™

**Bullying itu SALAH, titik!** Gak ada pembenaran apapun.

**Kalau kamu korban:**
- Cerita ke orang dewasa yang kamu percaya (guru BK, ortu, wali kelas)
- Kamu TIDAK salah!
- Simpan bukti kalau lewat chat/medsos

**Kalau kamu melihat:**
- Jangan jadi penonton pasif
- Dukung korban, ajak ngobrol
- Laporkan ke guru

**Kalau kamu pernah melakukan:**
- Gak ada kata terlambat untuk berubah
- Minta maaf dengan tulus
- Mulai jadi orang yang membela, bukan menyakiti

Di SMPN 4 Mappedeceng, kita junjung tinggi **Gotong Royong** dan saling menghargai. 

Ada cerita yang mau kamu share ke Kakak? Kakak siap dengerin tanpa menghakimi ğŸ’™`,

      digitalEthics: `Sobat, sebagai pengguna internet, kita harus jadi Pelajar Pancasila yang **Bernalar Kritis**! ğŸ§ ğŸ“±

**Golden Rules Online:**

**1. SARING SEBELUM SHARING ğŸ”**
- Cek sumbernya siapa
- Cari info pembanding
- Kalau ragu, jangan disebar!

**2. ANTI HOAX SQUAD ğŸ›¡ï¸**
- Berita heboh belum tentu benar
- Gunakan situs fact-check: cekfakta.com, turnbackhoax.id
- Tanya guru atau ortu kalau bingung

**3. JEJAK DIGITAL ITU ABADI ğŸ‘£**
- Sekali upload, susah dihapus total
- Jangan share foto/video yang memalukan (diri sendiri atau orang lain)
- Komen dengan sopan, seperti ngomong langsung

**4. PRIVASI ITU PENTING ğŸ”**
- Jangan share data pribadi (alamat, nomor HP, lokasi sekolah) ke stranger
- Password jangan dikasih ke siapapun

Yuk jadi netizen yang cerdas dan bertanggung jawab! ğŸš€`,

      outOfTopic: `Hmm, Sobat, kayaknya pertanyaan itu di luar area Kakak deh... ğŸ˜…

Kakak fokusnya bantu kamu soal:
âœ… Pelajaran sekolah (Matematika, IPA, IPS, Bahasa, dll)
âœ… Tips dan motivasi belajar
âœ… Curhat masalah sekolah
âœ… Karakter Pelajar Pancasila
âœ… Literasi digital

Untuk pertanyaan lainnya, lebih baik tanya langsung ke Guru atau orang tua ya! Mereka lebih jago jawabin ğŸ˜Š

Mau ganti topik? Kakak siap bantu yang lain kok! ğŸ’ª`,

      default: `Oke Sobat, Kakak coba bantu ya! ğŸ¤”

Hmm, coba jelasin lebih detail lagi pertanyaanmu. Misalnya:
- Pelajaran apa yang bikin bingung?
- Mau minta tips tentang apa?
- Ada masalah apa yang mau diceritain?

Makin jelas pertanyaannya, makin mantap Kakak bantu! âœ¨

Atau kamu bisa pilih topik dari tombol cepat di bawah chat ya! ğŸ‘‡`
    };

    // Analyze user message and get response
    function getKakLIDIResponse(userMessage) {
      const msg = userMessage.toLowerCase();
      
      // Greetings
      if (msg.match(/^(hai|halo|hi|hey|p|hei|assalam|selamat|apa kabar)/)) {
        return kakLIDIResponses.greetings[Math.floor(Math.random() * kakLIDIResponses.greetings.length)];
      }
      
      // Pythagoras
      if (msg.includes('pythagoras') || msg.includes('pitagoras') || (msg.includes('segitiga') && msg.includes('siku'))) {
        return kakLIDIResponses.pythagoras;
      }
      
      // Study tips
      if (msg.match(/(tips|cara|gimana|bagaimana).*(belajar|fokus|konsentrasi)/) || 
          msg.match(/(malas|males|susah|sulit).*(belajar|fokus)/)) {
        return kakLIDIResponses.tipsStudy;
      }
      
      // Pelajar Pancasila
      if (msg.includes('pelajar pancasila') || msg.includes('profil pelajar') || msg.includes('p5')) {
        return kakLIDIResponses.pelajarPancasila;
      }
      
      // Motivation / Stress
      if (msg.match(/(stres|stress|takut|cemas|nervous|deg-deg|galau).*(ujian|ulangan|uas|uts|pat|pas)/) ||
          msg.match(/(motivasi|semangat|down)/)) {
        return kakLIDIResponses.motivasiUjian;
      }
      
      // Homework request
      if (msg.match(/(buatin|bikinin|kerjain|tolong).*(pr|tugas|esai|essay|pidato|makalah|karya)/)) {
        return kakLIDIResponses.homework;
      }
      
      // Cheating
      if (msg.match(/(nyontek|contek|curang|kunci jawaban)/)) {
        return kakLIDIResponses.cheating;
      }
      
      // Bullying
      if (msg.match(/(bully|bullying|dibully|di-bully|dijaili|digangguin)/)) {
        return kakLIDIResponses.bullying;
      }
      
      // Digital ethics
      if (msg.match(/(hoax|hoaks|fake news|berita bohong|etika digital|sharing|medsos)/)) {
        return kakLIDIResponses.digitalEthics;
      }
      
      // Sensitive topics redirect
      if (msg.match(/(politik|pilpres|pilkada|partai|demo|dewasa|bokep|porn|pacaran|ciuman)/)) {
        return kakLIDIResponses.outOfTopic;
      }
      
      // Math help
      if (msg.match(/(matematika|mtk|rumus|hitung|aljabar|geometri|persamaan|pecahan|persen)/)) {
        return `Sip Sobat, mau bahas Matematika ya! ğŸ”¢âœ¨

Kakak siap bantu jelaskan konsepnya. Tapi ingat, Kakak gak akan kasih jawaban langsung - kamu harus hitung sendiri ya biar makin jago!

Coba ceritain lebih spesifik:
- Materi apa? (Aljabar, Geometri, Statistik, dll)
- Soalnya seperti apa?
- Bagian mana yang bikin bingung?

Nanti Kakak jelasin langkah-langkahnya! ğŸ’ª

ğŸ“š Jangan lupa cek juga materi di Rak Buku Digital SI-LIDI ya!`;
      }
      
      // Science help
      if (msg.match(/(ipa|sains|fisika|kimia|biologi|ekosistem|sel|atom|energi|gerak)/)) {
        return `Wah, mau eksplor sains nih! ğŸ”¬âœ¨

IPA itu seru banget lho Sobat, karena menjelaskan fenomena di sekitar kita!

Topik apa yang mau dibahas?
- ğŸ§¬ Biologi (makhluk hidup, sel, ekosistem)
- âš—ï¸ Kimia (zat, atom, reaksi)
- âš¡ Fisika (gerak, energi, listrik)

Kasih tau detail pertanyaanmu, nanti Kakak jelasin dengan cara yang gampang dipahami!

ğŸ“š Buat visualisasi dan eksperimen virtual, cek Rak Buku Digital SI-LIDI ya!`;
      }
      
      // Social studies
      if (msg.match(/(ips|sejarah|geografi|ekonomi|sosiologi|kerajaan|pahlawan|peta)/)) {
        return `Oke Sobat, mau bahas IPS nih! ğŸŒğŸ“–

IPS itu kayak jendela buat liat dunia dan masa lalu. Keren kan?

Mau fokus ke mana?
- ğŸ“œ Sejarah (kerajaan, pahlawan, peristiwa penting)
- ğŸ—ºï¸ Geografi (peta, iklim, bencana)
- ğŸ’° Ekonomi (kegiatan ekonomi, pasar)
- ğŸ‘¥ Sosiologi (masyarakat, budaya)

Ceritain aja yang bikin kamu penasaran!

ğŸ“š Buat timeline interaktif, cek Rak Buku Digital SI-LIDI!`;
      }
      
      // Language help
      if (msg.match(/(bahasa|inggris|indonesia|grammar|teks|cerpen|puisi|pantun|surat)/)) {
        return `Siap, Sobat! Mau bahas Bahasa ya! ğŸ“âœ¨

Bahasa itu kunci komunikasi. Makin jago berbahasa, makin luas duniamu!

Mau bantuan apa nih?
- ğŸ“– Bahasa Indonesia (teks, sastra, EYD)
- ğŸ‡¬ğŸ‡§ Bahasa Inggris (grammar, vocab, teks)

Kasih tau detailnya:
- Jenis teks apa?
- Bagian mana yang susah?
- Mau belajar menulis atau memahami?

Kakak bantu dengan senang hati! ğŸš€`;
      }
      
      // Terima kasih
      if (msg.match(/(terima kasih|makasih|thanks|thank you|thx)/)) {
        return `Sama-sama, Sobat LIDI! ğŸ˜ŠğŸ’™

Senang banget bisa bantu kamu. Ingat ya:
- ğŸ“š Buku adalah jendela dunia
- ğŸ‘¨â€ğŸ« Guru adalah sumber ilmu terbaik
- ğŸ’ª Kamu pasti bisa!

Kalau ada pertanyaan lagi, langsung aja chat Kakak. Semangat belajarnya! ğŸš€âœ¨`;
      }
      
      // Default response
      return kakLIDIResponses.default;
    }

    // Create message element
    function createMessageElement(role, content, timestamp) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message-bubble flex items-end gap-2 ${role === 'user' ? 'flex-row-reverse' : ''}`;
      messageDiv.dataset.timestamp = timestamp;
      
      const avatar = document.createElement('div');
      if (role === 'user') {
        avatar.className = 'w-8 h-8 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center text-white text-sm shadow flex-shrink-0';
        avatar.textContent = 'ğŸ‘¤';
      } else {
        avatar.className = 'w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm shadow flex-shrink-0';
        avatar.textContent = 'ğŸ¤–';
      }
      
      const bubble = document.createElement('div');
      bubble.className = role === 'user' 
        ? 'max-w-xs sm:max-w-sm md:max-w-md bg-gradient-to-br from-blue-500 to-purple-500 text-white rounded-2xl rounded-br-md px-4 py-3 shadow-md'
        : 'max-w-xs sm:max-w-sm md:max-w-md bg-gray-100 text-gray-800 rounded-2xl rounded-bl-md px-4 py-3 shadow-sm';
      
      // Parse markdown-like formatting
      let formattedContent = content
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
        .replace(/\*(.*?)\*/g, '<em>$1</em>')
        .replace(/_(.*?)_/g, '<em>$1</em>')
        .replace(/\n/g, '<br>');
      
      bubble.innerHTML = `<p class="text-sm leading-relaxed whitespace-pre-wrap">${formattedContent}</p>`;
      
      messageDiv.appendChild(avatar);
      messageDiv.appendChild(bubble);
      
      return messageDiv;
    }

    // Render messages
    function renderMessages() {
      const container = document.getElementById('messages-container');
      const welcomeSection = document.getElementById('welcome-section');
      
      if (chatHistory.length > 0) {
        welcomeSection.classList.add('hidden');
        
        // Clear and re-render all messages
        container.innerHTML = '';
        chatHistory.forEach(msg => {
          const msgEl = createMessageElement(msg.role, msg.content, msg.timestamp);
          container.appendChild(msgEl);
        });
      } else {
        welcomeSection.classList.remove('hidden');
      }
      
      // Scroll to bottom
      const chatContainer = document.getElementById('chat-container');
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    // Show/hide typing indicator
    function showTyping(show) {
      const indicator = document.getElementById('typing-indicator');
      if (show) {
        indicator.classList.remove('hidden');
        const chatContainer = document.getElementById('chat-container');
        chatContainer.scrollTop = chatContainer.scrollHeight;
      } else {
        indicator.classList.add('hidden');
      }
    }

    // Send message
    async function sendMessage(text) {
      if (!text.trim() || isProcessing) return;
      
      isProcessing = true;
      const sendBtn = document.getElementById('send-btn');
      const input = document.getElementById('message-input');
      
      sendBtn.disabled = true;
      input.disabled = true;
      
      // Add user message
      chatHistory.push({
        role: 'user',
        content: text.trim(),
        timestamp: Date.now()
      });
      
      renderMessages();
      input.value = '';
      
      // Show typing indicator
      showTyping(true);
      
      // Simulate thinking time
      await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 1500));
      
      // Get response
      const response = getKakLIDIResponse(text);
      
      // Add bot response
      chatHistory.push({
        role: 'assistant',
        content: response,
        timestamp: Date.now()
      });
      
      showTyping(false);
      renderMessages();
      
      isProcessing = false;
      sendBtn.disabled = false;
      input.disabled = false;
      input.focus();
    }

    // Clear chat
    function clearChat() {
      const container = document.getElementById('messages-container');
      
      // Create inline confirmation
      const confirmDiv = document.createElement('div');
      confirmDiv.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
      confirmDiv.innerHTML = `
        <div class="bg-white rounded-2xl p-6 mx-4 max-w-sm shadow-2xl">
          <div class="text-center mb-4">
            <span class="text-4xl">ğŸ—‘ï¸</span>
            <h3 class="text-lg font-bold text-gray-800 mt-2">Hapus Semua Chat?</h3>
            <p class="text-gray-600 text-sm mt-1">Riwayat percakapanmu akan dihapus.</p>
          </div>
          <div class="flex gap-3">
            <button id="cancel-clear" class="flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-full font-medium hover:bg-gray-200 transition-colors">
              Batal
            </button>
            <button id="confirm-clear" class="flex-1 px-4 py-2 bg-red-500 text-white rounded-full font-medium hover:bg-red-600 transition-colors">
              Hapus
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(confirmDiv);
      
      document.getElementById('cancel-clear').onclick = () => {
        confirmDiv.remove();
      };
      
      document.getElementById('confirm-clear').onclick = () => {
        chatHistory = [];
        renderMessages();
        confirmDiv.remove();
      };
    }

    // Initialize Element SDK
    async function onConfigChange(cfg) {
      config = { ...defaultConfig, ...cfg };
      
      // Update school name
      const schoolSubtitle = document.getElementById('school-subtitle');
      schoolSubtitle.textContent = `SI-LIDI â€¢ ${config.school_name || defaultConfig.school_name}`;
      
      // Update welcome title
      const welcomeTitle = document.getElementById('welcome-title');
      welcomeTitle.textContent = config.welcome_title || defaultConfig.welcome_title;
      
      // Update bot name
      const botName = document.getElementById('bot-name');
      botName.textContent = config.bot_name || defaultConfig.bot_name;
    }

    function mapToCapabilities(cfg) {
      return {
        recolorables: [
          {
            get: () => cfg.background_color || defaultConfig.background_color,
            set: (value) => {
              cfg.background_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ background_color: value });
            }
          },
          {
            get: () => cfg.primary_color || defaultConfig.primary_color,
            set: (value) => {
              cfg.primary_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ primary_color: value });
            }
          },
          {
            get: () => cfg.secondary_color || defaultConfig.secondary_color,
            set: (value) => {
              cfg.secondary_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ secondary_color: value });
            }
          },
          {
            get: () => cfg.text_color || defaultConfig.text_color,
            set: (value) => {
              cfg.text_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ text_color: value });
            }
          },
          {
            get: () => cfg.accent_color || defaultConfig.accent_color,
            set: (value) => {
              cfg.accent_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ accent_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(cfg) {
      return new Map([
        ['school_name', cfg.school_name || defaultConfig.school_name],
        ['welcome_title', cfg.welcome_title || defaultConfig.welcome_title],
        ['bot_name', cfg.bot_name || defaultConfig.bot_name]
      ]);
    }

    // Setup event listeners
    function setupEventListeners() {
      // Form submit
      document.getElementById('chat-form').addEventListener('submit', (e) => {
        e.preventDefault();
        const input = document.getElementById('message-input');
        sendMessage(input.value);
      });
      
      // Quick action buttons
      document.querySelectorAll('.quick-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const question = btn.dataset.question;
          sendMessage(question);
        });
      });
      
      // Clear button
      document.getElementById('clear-btn').addEventListener('click', clearChat);
    }

    // Initialize
    async function init() {
      setupEventListeners();
      
      // Init Element SDK if available
      if (window.elementSdk) {
        await window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues
        });
      }
    }

    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c539b9fa688c26b',t:'MTc2OTYzNjAwNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
